schedule = [
    {
        "team": "ARI",
        "week": ["Detroit Lions @ Arizona Cardinals",
            "Washington Football Team @ Arizona Cardinals",
            "Seattle Seahawks @ Arizona Cardinals",
            "Miami Dolphins @ Arizona Cardinals",
            "Buffalo Bills @ Arizona Cardinals",
            "Los Angeles Rams @ Arizona Cardinals",
            "Philadelphia Eagles @ Arizona Cardinals",
            "San Francisco 49ers @ Arizona Cardinals"],
        "opponents": ["DET", "WAS", "SEA", "BUF", "LAR", "PHI", "SF"],
        "colors": []
    },
    {
        "team": "ATL",
        "week": ["Seattle Seahawks @ Atlanta Falcons",
            "Chicago Bears @ Atlanta Falcons",
            "Carolina Panthers @ Atlanta Falcons",
            "Detroit Lions @ Atlanta Falcons",
            "Denver Broncos @ Atlanta Falcons",
            "Las Vegas Raiders @ Atlanta Falcons",
            "New Orleans Saints @ Atlanta Falcons",
            "Tampa Bay Buccaneers @ Atlanta Falcons"],
        "opponents": ["SEA", "CHI", "CAR", "DET", "DEN", "LV", "NO", "TB"]
    },
    {
        "team": "CAR",
        "week": ["Las Vegas Raiders @ Carolina Panthers",
            "Arizona Cardinals @ Carolina Panthers",
            "Chicago Bears @ Carolina Panthers",
            "Atlanta Falcons @ Carolina Panthers",
            "Tampa Bay Buccaneers @ Carolina Panthers",
            "Detroit Lions @ Carolina Panthers",
            "Denver Broncos @ Carolina Panthers",
            "New Orleans Saints @ Carolina Panthers"],
        "opponents": ["LV", "ARI", "CHI", "ATL", "TB", "DET", "DEN", "NO"]
    },
    {
        "team": "CHI",
        "week": ["New York Giants @ Chicago Bears",
            "Indianapolis Colts @ Chicago Bears",
            "Tampa Bay Buccaneers @ Chicago Bears",
            "New Orleans Saints @ Chicago Bears",
            "Minnesota Vikins @ Chicago Bears",
            "Detroit Lions @ Chicago Bears",
            "Houston Texans @ Chicago Bears",
            "Green Bay Packers @ Chicago Bears"],
        "opponents": []
    },
    {
        "team": "DAL",
        "week": ["Atlanta Falcons @ Dallas Cowboys",
            "Cleveland Browns @ Dallas Cowboys",
            "New York Giants @ Dallas Cowboys",
            "Arizona Cardinals @ Dallas Cowboys",
            "Pittsburgh Steelers @ Dallas Cowboys",
            "Washington Football Team @ Dallas Cowboys",
            "San Francisco 49ers @ Dallas Cowboys",
            "Philadelphia Eagles @ Dallas Cowboys"],
        "opponents": []
    },
    {
        "team": "DET",
        "week": ["Chicago Bears @ Detroit Lions",
            "New Orleans Saints @ Detroit Lions",
            "Indianapolis Colts @ Detroit Lions",
            "Washington Football Team @ Detroit Lions",
            "Houston Texans @ Detroit Lions",
            "Green Bay Packers @ Detroit Lions",
            "Tampa Bay Buccaneers @ Detroit Lions",
            "Minnesota Vikings @ Detroit Lions"],
        "opponents": []
    },
    {
        "team": "GB",
        "week": ["Detroit Lions @ Green Bay Packers",
            "Atlanta Falcons @ Green Bay Packers",
            "Minnesota Vikings @ Green Bay Packers",
            "Jacksonville Jaguars @ Green Bay Packers",
            "Chicago Bears @ Green Bay Packers",
            "Philadelphia Eagles @ Green Bay Packers",
            "Carolina Panthers @ Green Bay Packers",
            "Tennessee Titans @ Green Bay Packers"],
        "opponents": []
    },
    {
        "team": "LAR",
        "week": ["Dallas Cowboys @ Los Angeles Rams",
            "New York Giants @ Los Angeles Rams",
            "Chicago Bears @ Los Angeles Rams",
            "Seattle Seahawks @ Los Angeles Rams",
            "San Francisco 49ers @ Los Angeles Rams",
            "New England Patriots @ Los Angeles Rams",
            "New York Jets @ Los Angeles Rams",
            "Arizona Cardinals @ Los Angeles Rams"],
        "opponents": []
    },
    {
        "team": "MIN",
        "week": ["Green Bay Packers @ Minnesota Vikings",
            "Tennessee Titans @ Minnesota Vikings",
            "Atlanta Falcons @ Minnesota Vikings",
            "Detroit Lions @ Minnesota Vikings",
            "Dallas Cowboys @ Minnesota Vikings",
            "Carolina Panthers @ Minnesota Vikings",
            "Jacksonville Jaguars @ Minnesota Vikings",
            "Chicago Bears @ Minnesota Vikings"],
        "opponents": []
    },
    {
        "team": "NO",
        "week": ["Tampa Bay Buccaneers @ New Orleans Saints",
            "Green Bay Packers @ New Orleans Saints",
            "Los Angeles Chargers @ New Orleans Saints",
            "Carolina Panthers @ New Orleans Saints",
            "San Francisco 49ers @ New Orleans Saints",
            "Atlanta Falcons @ New Orleans Saints",
            "Kansas City Chiefs @ New Orleans Saints",
            "Minnesota Vikings @ New Orleans Saints"],
        "opponents": []
    },
    {
        "team": "NYG",
        "week": ["Pittsburgh Steelers @ New York Giants",
            "San Francisco 49ers @ New York Giants",
            "Washington Football Team @ New York Giants",
            "Tampa Bay Buccaneers @ New York Giants",
            "Philadelphia Eagles @ New York Giants",
            "Arizona Cardinals @ New York Giants",
            "Cleveland Browns @ New York Giants",
            "Dallas Cowboys @ New York Giants"],
        "opponents": []
    },
    {
        "team": "PHI",
        "week": ["Los Angeles Rams @ Philadelphia Eagles",
            "Cincinnati Bengals @ Philadelphia Eagles",
            "Baltimore Ravens @ Philadelphia Eagles",
            "New York Giants @ Philadelphia Eagles",
            "Dallas Cowboys @ Philadelphia Eagles",
            "Seattle Seahawks @ Philadelphia Eagles",
            "New Orleans Saints @ Philadelphia Eagles",
            "Washington Football Team @ Philadelphia Eagles"],
        "opponents": []
    },
    {
        "team": "SF",
        "week": ["Arizona Cardinals @ San Francisco 49ers",
            "Philadelphia Eagles @ San Francisco 49ers",
            "Miami Dolphins @ San Francisco 49ers",
            "Los Angeles Rams @ San Francisco 49ers",
            "Green Bay Packers @ San Francisco 49ers",
            "Buffalo Bills @ San Francisco 49ers",
            "Washington Football Team @ San Francisco 49ers",
            "Seattle Seahawks @ San Francisco 49ers"],
        "opponents": []
    },
    {
        "team": "SEA",
        "week": ["New England Patriots @ Seattle Seahawks",
            "Dallas Cowboys @ Seattle Seahawks",
            "Minnesota Vikings @ Seattle Seahawks",
            "San Francisco 49ers @ Seattle Seahawks",
            "Arizona Cardinals @ Seattle Seahawks",
            "New York Giants @ Seattle Seahawks",
            "New York Jets @ Seattle Seahawks",
            "Los Angeles Rams @ Seattle Seahawks"],
        "opponents": []
    },
    {
        "team": "TB",
        "week": ["Carolina Panthers @ Tampa Bay Buccaneers",
            "Los Angeles Chargers @ Tampa Bay Buccaneers",
            "Green Bay Packers @ Tampa Bay Buccanneers",
            "New Orleans Saints @ Tampa Bay Buccaneers",
            "Los Angeles Rams @ Tampa Bay Buccaneers",
            "Kansas City Chiefs @ Tampa Bay Buccaneers",
            "Minnesota Vikings @ Tampa Bay Buccaneers",
            "Atlanta Falcons @ Tampa Bay Buccaneers"],
        "opponents": []
    },
    {
        "team": "WAS",
        "week": ["Philadelphia Eagles @ Washington Football Team",
            "Baltimore Ravens @ Washington Football Team",
            "Los Angeles Rams @ Washington Football Team",
            "Dallas Cowboys @ Washington Football Team",
            "New York Giants @ Washington Football Team",
            "Cincinnati Bengals @ Washington Football Team",
            "Pittsburgh Steelers @ Washington Football Team",
            "Seattle Seahawks @ Washington Football Team",
            "Carolina Panthers @ Washington Football Team"],
        "opponents": []
    },
    {
        "team": "BAL",
        "week": ["Cleveland Browns @ Baltimore Ravens",
            "Kansas City Chiefs @ Baltimore Ravens",
            "Cincinnati Bengals @ Baltimore Ravens",
            "Pittsburgh Steelers @ Baltimore Ravens",
            "Tennessee Titans @ Baltimore Ravens",
            "Dallas Cowboys @ Baltimore Ravens",
            "Jacksonville Jaguars @ Baltimore Ravens",
            "New York Giants @ Baltimore Ravens"],
        "opponents": []
    },
    {
        "team": "BUF",
        "week": ["New York Jets @ Buffalo Bills",
            "Los Angeles Rams @ Buffalo Bills",
            "Kansas City Chiefs @ Buffalo Bills",
            "New England Patriots",
            "Seattle Seahawks @ Buffalo Bills",
            "Los Angeles Chargers @ Buffalo Bills",
            "Pittsburg Steelers @ Buffalo Bills",
            "Miami Dolphins @ Buffalo Bills"],
        "opponents": []
    },
    {
        "team": "CIN",
        "week": ["Los Angeles Chargers @ Cincinnati Bengals",
            "Jacksonville Jaguars @ Cincinnati Bengals",
            "Cleveland Browns @ Cincinnati Bengals",
            "Tennessee Titans @ Cincinnati Bengals",
            "Dallas Cowboys @ Cincinnati Bengals",
            "Pittsburgh Steelers @ Cincinnati Bengals",
            "Baltimore Ravens @ Cincinnati Bengals"],
        "opponents": []
    },
    {
        "team": "CLE",
        "week": ["Cincinnati Bengals @ Cleveland Browns",
            "Washington Football Team @ Cleveland Browns",
            "Inianapolis Colts @ Cleveland Browns",
            "Las Vegas Raiders @ Cleveland Browns",
            "Houston Texans @ Cleveland Browns",
            "Philadelphia Eagles @ Cleveland Browns",
            "Baltimore Ravens @ Cleveland Browns",
            "Pittsburgh Steelers @ Cleveland Browns"],
        "opponents": []
    },
    {
        "team": "DEN",
        "week": ["Tennessee Titans @ Denver Broncos",
            "Tampa Bay Buccaneers @ Denver Broncos",
            "Miami Dolphins @ Denver Broncos",
            "Kansas City Chiefs @ Denver Broncos",
            "Los Angeles Chargers @ Denver Broncos",
            "New Orleans Saints @ Denver Broncos",
            "Buffalo Bills @ Denver Broncos",
            "Las Vegas Raiders @ Denver Broncos"],
        "opponents": []
    },
    {
        "team": "HOU",
        "week": ["Baltimore Ravens @ Houston Texans",
            "Minnesota Vikings @ Houston Texans",
            "Jacksonville Jaguars @ Houston Texans",
            "Green Bay Packers @ Houston Texans",
            "New England Patriots @ Houston Texans",
            "Indianapolis Colts @ Houston Texans",
            "Cincinnati Bengals @ Houston Texans",
            "Tennessee Titans @ Houston Texans"],
        "opponents": []
    },
    {
        "team": "IND",
        "week": ["Minnesota Vikings @ Inianapolis Colts",
            "New York Jets @ Inianapolis Colts",
            "Cincinnati Bengals @ Inianapolis Colts",
            "Baltimore Ravens @ Inianapolis Colts",
            "Green Bay Packers @ Inianapolis Colts",
            "Tennessee Titans @ Inianapolis Colts",
            "Houston Texans @ Inianapolis Colts",
            "Jacksonville Jaguars @ Inianapolis Colts"],
        "opponents": []
    },
    {
        "team": "JAX",
        "week": ["Indianapolis Colts @ Jacksonville Jaguars",
            "Miami Dolphins @ Jacksonville Jaguars",
            "Detroit Loins @ Jacksonville Jaguars",
            "Houston Texans @ Jacksonville Jaguars",
            "Pittsburgh Steelers @ Jacksonville Jaguars",
            "Cleveland Browns @ Jacksonville Jaguars",
            "Tennessee Titans @ Jacksonville Jaguars",
            "Chicago Bears @ Jacksonville Jaguars"],
        "opponents": []
    },
    {
        "team": "KC",
        "week": ["Houston Texans @ Kansas City Chiefs",
            "New England Patriots @ Kansas City Chiefs",
            "Las Vegas Raiders @ Kansas City Chiefs",
            "New York Jets @ Kansas City Chiefs",
            "Carolina Panthers @ Kansas City Chiefs",
            "Denver Broncos @ Kansas City Chiefs",
            "Atlanta Falcons @ Kansas City Chiefs",
            "Los Angeles Chargers @ Kansas City Chiefs"],
        "opponents": []
    },
    {
        "team": "LV",
        "week": ["New Orleans Saints @ Las Vegas Raiders",
            "Buffalo Bills @ Las Vegas Raiders",
            "Tampa Bay Buccaneers @ Las Vegas Raiders",
            "Denver Broncos @ Las Vegas Raiders",
            "Kansas City Chiefs @ Las Vegas Raiders",
            "Indianapolis Colts @ Las Vegas Raiders",
            "Los Angeles Chargers @ Las Vegas Raiders",
            "Miami Dolphins @ Las Vegas Raiders"],
        "opponents": []
    },
    {
        "team": "LAC",
        "week": ["Kansas City Chiefs @ Los Angeles Chargers",
            "Carolina Panthers @ Los Angeles Chargers",
            "New York Jets @ Los Angeles Chargers",
            "Jacksonville Jaguars @ Los Angeles Chargers",
            "Las Vegas Raiders @ Los Angeles Chargers",
            "New England Patriots @ Los Angeles Chargers",
            "Atlanta Falcons @ Los Angeles Chargers",
            "Denver Broncos @ Los Angeles Chargers"],
        "opponents": []
    },
    {
        "team": "MIA",
        "week": ["Buffalo Bills @ Miami Dolphins",
            "Seattle Seahawks @ Miami Dolphins",
            "Los Angeles Chargers @ Miami Dolphins",
            "Los Angeles Rams @ Miami Dolphins",
            "New York Jets @ Miami Dolphins",
            "Cincinnati Bengals @ Miami Dolphins",
            "Kansas City Chiefs @ Miami Dolphins",
            "New England Patriots @ Miami Dolphins"],
        "opponents": []
    },
    {
        "team": "NE",
        "week": ["Miami Dolphins @ New England Patriots",
            "Las Vegas Raiders @ New England Patriots",
            "Denver Broncos @ New England Patriots",
            "San Francisco 49ers @ New England Patriots",
            "Baltimore Ravens @ New England Patriots",
            "Arizona Cardinals @ New England Patriots",
            "Buffalo Bills @ New England Patriots",
            "New York Jets @ New England Patriots"],
        "opponents": []
    },
    {
        "team": "NYJ",
        "week": ["San Francisco 49ers @ New York Jets",
            "Denver Broncos @ New York Jets",
            "Arizona Cardinals @ New York Jets",
            "Buffalo Bills @ New York Jets",
            "New England Patriots @ New York Jets",
            "Miami Dolphins @ New York Jets",
            "Las Vegas Raiders @ New York Jets",
            "Cleveland Browns @ New York Jets"],
        "opponents": []
    },
    {
        "team": "PIT",
        "week": ["Denver Broncos @ Pittsburgh Steelers",
            "Houston Texans @ Pittsburgh Steelers",
            "Philadelphia Eagles @ Pittsburgh Steelers",
            "Cleveland Browns @ Pittsburgh Steelers",
            "Cincinnati Bengals @ Pittsburgh Steelers",
            "Baltimore Ravens @ Pittsburgh Steelers",
            "Washington Football Team @ Pittsburgh Steelers",
            "Indianapolis Colts @ Pittsburgh Steelers"],
        "opponents": []
    },
    {
        "team": "TEN",
        "week": ["Jacksonville Jaguars @ Tennessee Titans",
            "Pittsburgh Steelers @ Tennessee Titans",
            "Buffalo Bills @ Tennessee Titans",
            "Houston Texans @ Tennessee Titans",
            "Chicago Bears @ Tennessee Titans",
            "Indianapolis Colts @ Tennessee Titans",
            "Cleveland Browns @ Tennessee Titans",
            "Detroit Lions @ Tennessee Titans"],
        "opponents": []
    }
];

$(document).ready(function () {

    $("button").on("click", function () {
        $("#teamGame").empty();
        $("#teamName").empty();
    });

    //event listener for the drop-down menu
    $(".dropdown-menu a").click(function (event) {
        event.preventDefault();
        //grab the team name based on user selection
        selectedTeam = $(this).attr("id");

        // obtain schedule info from football.io Schedules API
        $.ajax({
            url: "https://api.sportsdata.io/v3/nfl/scores/json/Schedules/2020?key=6306de6ffce1432bae3dc370a38a8de3",
            method: "GET"
        }).then(function (response) {
            let homeTeamGames = response.filter(homeTeamGames => (homeTeamGames.HomeTeam === selectedTeam && homeTeamGames.AwayTeam != "BYE"));
            let awayTeam = []
            console.log(homeTeamGames)
            for (let i = 0; i < homeTeamGames.length; i++) {
                awayTeam.push(homeTeamGames[i].AwayTeam);
                console.log(awayTeam);
            }
        });

        //obtain state and stadium capacity from football.io Teams API
        $.ajax({
            url: "https:/api.sportsdata.io/v3/nfl/scores/json/Teams?key=6306de6ffce1432bae3dc370a38a8de3",
            method: "GET"
        }).then(function (response) {
            //find the object for the selected team
            let obj = response.find(obj => (obj.Key === selectedTeam));
            // console.log(obj)
            //team's full name
            var homeTeamFullName = obj.City + " " + obj.Name;
            //state the team plays in
            let teamState = obj.StadiumDetails.State;
            //team's primary color
            let homeTeamPrimary = obj.PrimaryColor;
            //team's secondary color
            let homeTeamSecondary = obj.SecondaryColor;
            //stadium capacity
            let stadiumCap = obj.StadiumDetails.Capacity;
            // console.log("State: " + teamState + ", stadium capacity: " + stadiumCap);



            //layout the team schedule
            //matchup text for the selected team from array
            let teamSchedule = schedule.find(teamSchedule => (teamSchedule.team === selectedTeam));
            selectedSchedule = teamSchedule.week;
            // console.log(teamSchedule);


            // console.log(response)
            // // console.log(teamSchedule.opponents)
            // for (let index = 0; index < teamSchedule.opponents.length; index++) {
            //     let selectedOpp2 = response.find(team => {
            //         return team.Key === teamSchedule.opponents[index]
            //     })

            //     optteancolor = selectedOpp2.PrimaryColor
            //     teamSchedule.colors = optteancolor;
            // }

            // console.log(teamSchedule)
            // // opponents of the selected team from array
            // let teamOpponent = schedule.find(teamSchedule => (selectedSchedule.team === selectedTeam));
            // selectedOpponent = selectedOpponent.opponents;
            // console.log(selectedOpponent);
            //create the heading
            $("#teamName").html(homeTeamFullName + " Home Schedule");
            //loop through opponents
            for (i = 0; i < selectedSchedule.length; i++) {
                $("#teamGame")
                    .append($("<tr>")
                        .text(selectedSchedule[i])
                        .addClass("tablerow")
                        .attr("id", "teamRow")
                        .attr("href", "#landingPage.html")
                        .text(selectedSchedule[i])
                        .css("background", "linear-gradient(140deg, #1301FE 30%, #" + homeTeamPrimary + " 70%")
                    );

            }








            //obtain COVID case data from covidtracking API
            $.ajax({
                url: "https://covidtracking.com/api/v1/states/current.json",
                method: "GET"
            }).then(function (response) {
                //find the object with the selected state
                let obj = response.find(obj => (obj.state === teamState));
                //num people in the state who are positive
                let positive = obj.positive;
                // console.log("number positive: ", positive);
            })
        });
    });//closes event listener



    // Sportsdata.io API urls:

    // https://api.sportsdata.io/v3/nfl/scores/json/Teams?key=6306de6ffce1432bae3dc370a38a8de3

    // https://api.sportsdata.io/v3/nfl/scores/json/Stadiums?key=6306de6ffce1432bae3dc370a38a8de3

    // https://api.sportsdata.io/v3/nfl/scores/json/Schedules/2020?key=6306de6ffce1432bae3dc370a38a8de3


});//closes ready fcn
